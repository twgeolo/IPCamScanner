var IPCamScanController=function(){function l(l){var e=l.split("."),c=!0;for(var n in e)c=!e[n].match(/^\d{1,3}$/)||Number(e[n])>255?!1:c;return c=4!=e.length?!1:c}var e={},c={},n={},i=!1,t=function(){c={},n={},i=!1};return e.scan=function(){t(),$(".main").css("padding-top","50px");var l=$('<div id="content"></div>').appendTo("#list");a=new IPCamScanner,a.scan_routers(function(c,n){if(n.length>0)for(var i=0;i<n.length;i++)e.scan_with_router_url(n[i],"Detected");if(c.scanned>=c.total){if(0==n.length)return;var i;for(i=0;i<n.length;i++){var t='<div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone"><div class="section__circle-container__circle mdl-color--primary"></div></div><div class="section__text mdl-cell mdl-cell--10-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone"><h5>IP Camera '+(i+1)+"</h5>"+n[i]+".</div>";l.html(t)}}})},e.scan_with_user_ip=function(){var c=$("#user_ip").val();if(0==c.length)return void alert("please input an ip address before start!");if(!l(c))return void alert("please input a valid ip address something like 192.168.0.123!");var n="http://"+c;e.scan_with_router_url(n,"User")},e.scan_with_router_url=function(l,n){if(!c[l]){c[l]=!0;var t=$('<div id="content"></div>').appendTo("#list"),r=new IPCamScanner;r.scan_ip(l,function(l,c){if(c.length>0)for(var n=0;n<c.length;n++){var r=c[n];t.html('<div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone"><div class="section__circle-container__circle mdl-color--primary"></div></div><div class="section__text mdl-cell mdl-cell--10-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone"><h5>IP Camera '+(n+1)+"</h5>"+r+".</div>"),e.check_ipcam_with_ip(c[n])}if(l.scanned>=l.total){if(0==c.length)return;if(!i)return}})}},e.check_ipcam_with_ip=function(l){if(!n[l]){n[l]=!0;var e=($('<div id="content"></div>').appendTo("#list"),new URLScanner);e.probe_url(l+"/get_status.cgi",function(e,c){c&&(message_el.html('<div class="section__circle-container mdl-cell mdl-cell--2-col mdl-cell--1-col-phone"><div class="section__circle-container__circle mdl-color--primary"></div></div><div class="section__text mdl-cell mdl-cell--10-col-desktop mdl-cell--6-col-tablet mdl-cell--3-col-phone"><h5>IP Camera</h5>'+l+".</div>"),i=!0)})}},e},controller=new IPCamScanController;controller.scan();
